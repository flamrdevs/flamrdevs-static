---
import { GetStaticPaths, InferGetStaticParamsType, InferGetStaticPropsType } from "astro";

import { Box, Container, HTMLX, Separator, Text } from "~/components/core";

import Stats from "~/components/apps/Stats";

import { HOST } from "~/utils/exports";

export const getStaticPaths = (async () => {
	const projects: {
		name: string;
		host: string;
	}[] = [
		{
			name: "static",
			host: HOST.STATIC(),
		},
		{
			name: "site",
			host: HOST.SITE(),
		},
		{
			name: "web",
			host: HOST.WEB(),
		},
	];
	return projects.map(({ name, host }) => {
		return {
			params: { name },
			props: { host },
		};
	});
}) satisfies GetStaticPaths;

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { name } = Astro.params as Params;
const { host } = Astro.props as Props;
---

<HTMLX>
	<svg style="display: none;">
		<symbol id="lucide-chevron-down" viewBox="0 0 24 24">
			<path d="m6 9 6 6 6-6"></path>
		</symbol>
		<symbol id="lucide-file" viewBox="0 0 24 24">
			<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
			<polyline points="14 2 14 8 20 8"></polyline>
		</symbol>
		<symbol id="lucide-folder" viewBox="0 0 24 24">
			<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path>
		</symbol>
	</svg>
	<Container max="xs" py="2">
		<Box>
			<Text align="-:-">{name}</Text>
		</Box>

		<Separator />

		<Box py="2" class="font-mono select-none">
			<Stats host={host} client:only />
		</Box>
	</Container>
</HTMLX>
