---
import propsplit from "propsplit";

import { ClassesKeys, classex } from "./../../classes";
import type * as Polymorphic from "./../../polymorphic";

import * as klass from "./../.klass";
import * as reklass from "./../.reklass";

type Props<As extends Polymorphic.As = "div"> = Polymorphic.Props<
	As,
	{
		family?: klass.TypographyVariants["ff"];
		size?: klass.TypographyVariants["fz"];
		weight?: klass.TypographyVariants["fw"];
		align?: klass.TypographyVariants["ta"];
		italic?: boolean;
	} & reklass.MarginVariants &
		reklass.PaddingVariants
>;

const { as: As = "div", family = "sans", size = "3", weight = "4", align = ":--", italic, ...props } = Astro.props;

const [classes, margin, padding, attrs] = propsplit(props, ClassesKeys, reklass.Margin.rvk, reklass.Padding.rvk);

const className = classex(
	[
		klass.Typography({
			ff: family,
			fz: size,
			fs: italic ? "i" : "n",
			fw: weight,
			ta: align,
		}),
		reklass.Margin(margin),
		reklass.Padding(padding),
	],
	classes
);
---

<As {...attrs as any} class={className}>
	<slot />
</As>
